<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title> WebSocket chat </title>
</head>

<body>

    <form name="input" action="">
        <input type="text" name="message" value="">
        <input type="button" name="send" id="send_button" value="message送信">
    </from> 

    <div id="chat_area"></div>

    <script>
        let ws = new WebSocket('ws://localhost:8080');
        ws.addEventListener('open', e => {
            console.log('WebSocket で接続');
        })

        ws.addEventListener('message', e => {
            let chat = document.getElementById('chat_area');
            chat.innerHTML += e.data + "<br>";
            console.log(e.data);
        })
        document.getElementById('send_button').addEventListener('click', e => {
            var my_message = document.input.message.value;
            ws.send(my_message);
            document.input.message.value = "";
        })
    </script>
</body>

</html>